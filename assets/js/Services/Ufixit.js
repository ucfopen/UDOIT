import AltText from '../Components/Forms/AltText'
import AnchorText from '../Components/Forms/AnchorText'
import AriaRoleForm from '../Components/Forms/AriaRoleForm'
import BlockquoteForm from '../Components/Forms/BlockquoteForm'
import ContrastForm from '../Components/Forms/ContrastForm'
import EmbeddedContentTitleForm from '../Components/Forms/EmbeddedContentTitleForm'
import EmphasisForm from '../Components/Forms/EmphasisForm'
import HeadingEmptyForm from '../Components/Forms/HeadingEmptyForm'
import HeadingStyleForm from '../Components/Forms/HeadingStyleForm'
import LabelForm from '../Components/Forms/LabelForm'
import LinkForm from '../Components/Forms/LinkForm'
import ListForm from '../Components/Forms/ListForm'
import MediaCaptionsForm from '../Components/Forms/MediaCaptionsForm'
import QuoteForm from '../Components/Forms/QuoteForm'
import SensoryMisuseForm from '../Components/Forms/SensoryMisuseForm'
import TableCaptionForm from '../Components/Forms/TableCaptionForm'
import TableHeadersForm from '../Components/Forms/TableHeadersForm'

import UfixitReviewOnly from '../Components/Forms/UfixitReviewOnly'

// These form names strictly match the translation keys in the language files (e.g. en.json).
export const formNames = {
  ALT_TEXT: 'alt_text',
  ANCHOR_TEXT: 'anchor_text',
  ARIA_ROLE: 'aria_role',
  BLOCKQUOTE: 'blockquote',
  CONTRAST: 'contrast',
  EMBEDDED_CONTENT_TITLE: 'embedded_content_title',
  EMPHASIS: 'emphasis',
  HEADING_EMPTY: 'heading_empty',
  HEADING_STYLE: 'heading_style',
  LABEL: 'label',
  LABEL_UNIQUE: 'label_unique',
  LINK: 'link',
  LIST: 'list',
  MEDIA_CAPTIONS: 'media_captions',
  QUOTE: 'quote',
  SENSORY_MISUSE: 'sensory_misuse',
  TABLE_CAPTION: 'table_caption',
  TABLE_HEADERS: 'table_headers',

  REVIEW_ONLY: 'review_only',
}

export const disabilityTypes = {
  COGNITIVE: 'cognitive',
  HEARING: 'hearing',
  MOTOR: 'motor',
  VISUAL: 'visual',
}

const formTypes = {
  [formNames.ALT_TEXT]: AltText,
  [formNames.ANCHOR_TEXT]: AnchorText,
  [formNames.ARIA_ROLE]: AriaRoleForm,
  [formNames.BLOCKQUOTE]: BlockquoteForm,
  [formNames.CONTRAST]: ContrastForm,
  [formNames.EMBEDDED_CONTENT_TITLE]: EmbeddedContentTitleForm,
  [formNames.EMPHASIS]: EmphasisForm,
  [formNames.HEADING_EMPTY]: HeadingEmptyForm,
  [formNames.HEADING_STYLE]: HeadingStyleForm,
  [formNames.LABEL]: LabelForm,
  [formNames.LABEL_UNIQUE]: LabelForm,
  [formNames.LINK]: LinkForm,
  [formNames.LIST]: ListForm,
  [formNames.MEDIA_CAPTIONS]: MediaCaptionsForm,
  [formNames.QUOTE]: QuoteForm,
  [formNames.SENSORY_MISUSE]: SensoryMisuseForm,
  [formNames.TABLE_CAPTION]: TableCaptionForm,
  [formNames.TABLE_HEADERS]: TableHeadersForm,
  
  [formNames.REVIEW_ONLY]: UfixitReviewOnly,
}

// Using the formNames as the only values prevents typos and other errors.
const rulesToFormNameMap = {
  // phpAlly rules
  AnchorMustContainText: formNames.ANCHOR_TEXT,
  AnchorSuspiciousLinkText: formNames.ANCHOR_TEXT,
  BrokenLink: formNames.LINK,
  CssTextHasContrast: formNames.CONTRAST,
  CssTextStyleEmphasize: formNames.EMPHASIS,
  HeadersHaveText: formNames.HEADING_EMPTY,
  ImageAltIsDifferent: formNames.ALT_TEXT,
  ImageAltIsTooLong: formNames.ALT_TEXT,
  ImageAltNotEmptyInAnchor: formNames.ALT_TEXT,
  ImageHasAlt: formNames.ALT_TEXT,
  ImageHasAltDecorative: formNames.ALT_TEXT,
  ParagraphNotUsedAsHeader: formNames.HEADING_STYLE,
  RedirectedLink: formNames.LINK,
  TableDataShouldHaveTableHeader: formNames.TABLE_HEADERS,
  TableHeaderShouldHaveScope: formNames.TABLE_HEADERS,
  ImageAltNotPlaceholder: formNames.ALT_TEXT,
  VideoCaptionsMatchCourseLanguage: formNames.MEDIA_CAPTIONS,
  VideosEmbeddedOrLinkedNeedCaptions: formNames.MEDIA_CAPTIONS,
  VideosHaveAutoGeneratedCaptions: formNames.MEDIA_CAPTIONS,

  // Equal Access Rules
  imagemap_alt_exists: formNames.ALT_TEXT,
  img_alt_background: formNames.ALT_TEXT,
  img_alt_decorative: formNames.ALT_TEXT,
  img_alt_misuse: formNames.ALT_TEXT,
  img_alt_null: formNames.ALT_TEXT,
  img_alt_redundant: formNames.ALT_TEXT,
  img_alt_valid: formNames.ALT_TEXT,

  a_text_purpose: formNames.ANCHOR_TEXT,
  area_alt_exists: formNames.ANCHOR_TEXT,

  aria_role_valid: formNames.ARIA_ROLE,
  aria_role_allowed: formNames.ARIA_ROLE,

  blockquote_cite_exists: formNames.BLOCKQUOTE,

  text_contrast_sufficient: formNames.CONTRAST,
  
  applet_alt_exists: formNames.EMBEDDED_CONTENT_TITLE,
  embed_alt_exists: formNames.EMBEDDED_CONTENT_TITLE,
  frame_title_exists: formNames.EMBEDDED_CONTENT_TITLE,
  media_alt_brief: formNames.EMBEDDED_CONTENT_TITLE,
  media_alt_exists: formNames.EMBEDDED_CONTENT_TITLE,
  object_text_exists: formNames.EMBEDDED_CONTENT_TITLE,

  style_color_misuse: formNames.EMPHASIS,

  heading_content_exists: formNames.HEADING_EMPTY,

  heading_markup_misuse: formNames.HEADING_STYLE,
  text_block_heading: formNames.HEADING_STYLE,

  aria_accessiblename_exists: formNames.LABEL,
  aria_application_labelled: formNames.LABEL,
  aria_complementary_labelled: formNames.LABEL,
  aria_region_labelled: formNames.LABEL,

  aria_application_label_unique: formNames.LABEL_UNIQUE,
  aria_article_label_unique: formNames.LABEL_UNIQUE,
  aria_banner_label_unique: formNames.LABEL_UNIQUE,
  aria_complementary_label_unique: formNames.LABEL_UNIQUE,
  aria_contentinfo_label_unique: formNames.LABEL_UNIQUE,
  aria_document_label_unique: formNames.LABEL_UNIQUE,
  aria_form_label_unique: formNames.LABEL_UNIQUE,
  aria_landmark_name_unique: formNames.LABEL_UNIQUE,
  aria_main_label_unique: formNames.LABEL_UNIQUE,
  aria_navigation_label_unique: formNames.LABEL_UNIQUE,
  aria_region_label_unique: formNames.LABEL_UNIQUE,
  aria_search_label_unique: formNames.LABEL_UNIQUE,
  aria_toolbar_label_unique: formNames.LABEL_UNIQUE,

  list_children_valid: formNames.LIST,
  list_markup_review: formNames.LIST,
  list_structure_proper: formNames.LIST,

  caption_track_exists: formNames.MEDIA_CAPTIONS,
  media_audio_transcribed: formNames.MEDIA_CAPTIONS,
  
  text_quoted_correctly: formNames.QUOTE,

  text_sensory_misuse: formNames.SENSORY_MISUSE,

  table_caption_empty: formNames.TABLE_CAPTION,
  table_caption_nested: formNames.TABLE_CAPTION,

  table_headers_exists: formNames.TABLE_HEADERS,
}

export function formFromIssue(activeIssue) {
  if (activeIssue) {
    const ruleId = activeIssue.scanRuleId
    // Get the form name based on the ruleId
    if (rulesToFormNameMap.hasOwnProperty(ruleId)) {
      const formName = rulesToFormNameMap[ruleId]
      // Get the form component based on the form name
      if (formTypes.hasOwnProperty(formName)) {
        return formTypes[formName]
      }
    }
  }
  return UfixitReviewOnly
}

export function formNameFromRule(ruleId) {
  
  if (rulesToFormNameMap.hasOwnProperty(ruleId)) {
    return rulesToFormNameMap[ruleId]
  }

  // If the ruleId is not found, return a default form name
  return formNames.REVIEW_ONLY
}

export function disabilitiesFromRule(ruleId) {
  let disabilities = []
  if (rulesToFormNameMap.hasOwnProperty(ruleId)) {
    let formName = rulesToFormNameMap[ruleId]
    switch (formName) {
      case formNames.ALT_TEXT:
        disabilities = [disabilityTypes.VISUAL]
        break
      case formNames.ANCHOR_TEXT:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.ARIA_ROLE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.BLOCKQUOTE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.CONTRAST:
        disabilities = [disabilityTypes.VISUAL]
        break
      case formNames.EMBEDDED_CONTENT_TITLE:
        disabilities = [disabilityTypes.VISUAL, disabilityTypes.COGNITIVE]
        break
      case formNames.EMPHASIS:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.HEADING_EMPTY:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.HEADING_STYLE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.LABEL:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.LABEL_UNIQUE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.LINK:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.LIST:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.MEDIA_CAPTIONS:
        disabilities = [disabilityTypes.HEARING, disabilityTypes.VISUAL]
        break
      case formNames.QUOTE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.SENSORY_MISUSE:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.TABLE_CAPTION:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      case formNames.TABLE_HEADERS:
        disabilities = [disabilityTypes.COGNITIVE, disabilityTypes.VISUAL]
        break
      default:
        disabilities = []
        break
    }
    return disabilities
  } else {
    return []
  }
}